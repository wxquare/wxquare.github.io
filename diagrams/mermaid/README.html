<h1 id="Redis-æ•°æ®ç»“æ„å¯è§†åŒ–æ–‡æ¡£"><a href="#Redis-æ•°æ®ç»“æ„å¯è§†åŒ–æ–‡æ¡£" class="headerlink" title="Redis æ•°æ®ç»“æ„å¯è§†åŒ–æ–‡æ¡£"></a>Redis æ•°æ®ç»“æ„å¯è§†åŒ–æ–‡æ¡£</h1><p>æœ¬ç›®å½•åŒ…å«äº† Redis å†…éƒ¨æ•°æ®ç»“æ„çš„è¯¦ç»†å¯è§†åŒ– Mermaid å›¾è¡¨ã€‚</p>
<h2 id="ğŸ“-æ–‡ä»¶æ¸…å•"><a href="#ğŸ“-æ–‡ä»¶æ¸…å•" class="headerlink" title="ğŸ“ æ–‡ä»¶æ¸…å•"></a>ğŸ“ æ–‡ä»¶æ¸…å•</h2><h3 id="ç”µå•†ç³»ç»Ÿæ¶æ„"><a href="#ç”µå•†ç³»ç»Ÿæ¶æ„" class="headerlink" title="ç”µå•†ç³»ç»Ÿæ¶æ„"></a>ç”µå•†ç³»ç»Ÿæ¶æ„</h3><ul>
<li><strong><code>1.mmd</code></strong> - ç”µå•†ç³»ç»Ÿæ•´ä½“æ¶æ„å›¾ï¼ˆ6å±‚æ¶æ„ï¼‰</li>
</ul>
<h3 id="Redis-Hash-ç›¸å…³"><a href="#Redis-Hash-ç›¸å…³" class="headerlink" title="Redis Hash ç›¸å…³"></a>Redis Hash ç›¸å…³</h3><ul>
<li><strong><code>redis-hashtable.mmd</code></strong> - Dict å’Œ Hashtable åŸºç¡€ç»“æ„</li>
<li><strong><code>redis-rehash-process.mmd</code></strong> - æ¸è¿›å¼ Rehash æµç¨‹ï¼ˆ4ä¸ªé˜¶æ®µï¼‰</li>
<li><strong><code>redis-hash-encoding.mmd</code></strong> - ziplist vs hashtable ç¼–ç å¯¹æ¯”</li>
</ul>
<h3 id="Redis-Ziplist-ç›¸å…³"><a href="#Redis-Ziplist-ç›¸å…³" class="headerlink" title="Redis Ziplist ç›¸å…³"></a>Redis Ziplist ç›¸å…³</h3><ul>
<li><strong><code>redis-ziplist-detail.mmd</code></strong> - Ziplist è¯¦ç»†ç»“æ„ï¼ˆentry ä¸‰éƒ¨åˆ†ï¼‰</li>
<li><strong><code>redis-ziplist-memory.mmd</code></strong> - å†…å­˜å¸ƒå±€å®ä¾‹ï¼ˆå«ç¼–ç è¯¦è§£ï¼‰</li>
<li><strong><code>redis-ziplist-hash-visual.mmd</code></strong> - Hash å®æˆ˜å¯è§†åŒ– <code>&#123;name:&quot;iPhone&quot;, price:5999&#125;</code></li>
<li><strong><code>redis-ziplist-hash-example.md</code></strong> - Hash å®æˆ˜è¯¦ç»†åˆ†æï¼ˆå­—èŠ‚çº§ï¼‰</li>
</ul>
<h3 id="æ•°æ®ç»“æ„å¯¹æ¯”"><a href="#æ•°æ®ç»“æ„å¯¹æ¯”" class="headerlink" title="æ•°æ®ç»“æ„å¯¹æ¯”"></a>æ•°æ®ç»“æ„å¯¹æ¯”</h3><ul>
<li><strong><code>redis-datastructure-comparison.mmd</code></strong> - ziplist vs linkedlist vs hashtable å¯¹æ¯”</li>
</ul>
<h3 id="é¢„è§ˆæ–‡ä»¶"><a href="#é¢„è§ˆæ–‡ä»¶" class="headerlink" title="é¢„è§ˆæ–‡ä»¶"></a>é¢„è§ˆæ–‡ä»¶</h3><ul>
<li><strong><code>redis-hashtable-preview.md</code></strong> - Hashtable å›¾è¡¨é¢„è§ˆ</li>
<li><strong><code>redis-ziplist-preview.md</code></strong> - Ziplist å›¾è¡¨é¢„è§ˆ</li>
<li><strong><code>redis-ziplist-hash-preview.md</code></strong> - Hash å®æˆ˜é¢„è§ˆï¼ˆæ¨èï¼ï¼‰</li>
</ul>
<hr>
<h2 id="ğŸŒŸ-æ¨èï¼šå®æˆ˜æ¡ˆä¾‹"><a href="#ğŸŒŸ-æ¨èï¼šå®æˆ˜æ¡ˆä¾‹" class="headerlink" title="ğŸŒŸ æ¨èï¼šå®æˆ˜æ¡ˆä¾‹"></a>ğŸŒŸ æ¨èï¼šå®æˆ˜æ¡ˆä¾‹</h2><h3 id="Hash-name-iPhone-price-5999-å®Œæ•´åˆ†æ-â­"><a href="#Hash-name-iPhone-price-5999-å®Œæ•´åˆ†æ-â­" class="headerlink" title="Hash {name: &quot;iPhone&quot;, price: 5999} å®Œæ•´åˆ†æ â­"></a>Hash <code>&#123;name: &quot;iPhone&quot;, price: 5999&#125;</code> å®Œæ•´åˆ†æ â­</h3><p>è¿™æ˜¯ä¸€ä¸ª<strong>è¶…è¯¦ç»†çš„å®æˆ˜æ¡ˆä¾‹</strong>ï¼Œå®Œæ•´å±•ç¤ºäº† Redis Hash åœ¨ ziplist ç¼–ç ä¸‹çš„å­—èŠ‚çº§å†…å­˜å¸ƒå±€ã€‚</p>
<p><strong>åŒ…å«å†…å®¹</strong>ï¼š</p>
<ul>
<li>âœ… å®Œæ•´çš„ 36 å­—èŠ‚å†…å­˜æ˜ å°„ï¼ˆåå…­è¿›åˆ¶ï¼‰</li>
<li>âœ… 4 ä¸ª entry çš„è¯¦ç»†è§£æï¼ˆprevlen + encoding + contentï¼‰</li>
<li>âœ… æ•´æ•°ä¼˜åŒ–ç¤ºä¾‹ï¼ˆ5999 åªç”¨ 2 å­—èŠ‚ï¼ï¼‰</li>
<li>âœ… ä¸ hashtableã€JSON çš„å†…å­˜å¯¹æ¯”ï¼ˆèŠ‚çœ 83%ï¼‰</li>
<li>âœ… HGETã€HINCRBYã€HSET æ“ä½œæ¼”ç¤º</li>
</ul>
<p><strong>å¿«é€Ÿé¢„è§ˆ</strong>ï¼š</p>
<ul>
<li>ğŸ“„ <code>redis-ziplist-hash-example.md</code> - è¯¦ç»†æ–‡å­—è¯´æ˜</li>
<li>ğŸ“Š <code>redis-ziplist-hash-preview.md</code> - å¯è§†åŒ–å›¾è¡¨ï¼ˆ<strong>æ¨èå…ˆçœ‹è¿™ä¸ªï¼</strong>ï¼‰</li>
</ul>
<p><strong>å†…å­˜å¯¹æ¯”ç»“æœ</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ziplist:     36 å­—èŠ‚  âœ… æœ€ä¼˜</span><br><span class="line">String JSON: 50 å­—èŠ‚  (+39%)</span><br><span class="line">hashtable:  214 å­—èŠ‚  (+494%)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ¯-å¿«é€Ÿå¯¼èˆª"><a href="#ğŸ¯-å¿«é€Ÿå¯¼èˆª" class="headerlink" title="ğŸ¯ å¿«é€Ÿå¯¼èˆª"></a>ğŸ¯ å¿«é€Ÿå¯¼èˆª</h2><h3 id="1-Redis-Hash-åº•å±‚åŸç†"><a href="#1-Redis-Hash-åº•å±‚åŸç†" class="headerlink" title="1. Redis Hash åº•å±‚åŸç†"></a>1. Redis Hash åº•å±‚åŸç†</h3><h4 id="åŒç¼–ç ç­–ç•¥"><a href="#åŒç¼–ç ç­–ç•¥" class="headerlink" title="åŒç¼–ç ç­–ç•¥"></a>åŒç¼–ç ç­–ç•¥</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°å¯¹è±¡ï¼ˆ&lt;512 entriesï¼‰ â†’ ziplistï¼ˆèŠ‚çœå†…å­˜ï¼‰</span><br><span class="line">å¤§å¯¹è±¡ï¼ˆâ‰¥512 entriesï¼‰ â†’ hashtableï¼ˆå¿«é€ŸæŸ¥æ‰¾ï¼‰</span><br></pre></td></tr></table></figure>

<p><strong>æ ¸å¿ƒæ–‡ä»¶</strong>ï¼š</p>
<ul>
<li>ğŸ“Š <code>redis-hash-encoding.mmd</code> - ç¼–ç é€‰æ‹©å’Œè½¬æ¢</li>
<li>ğŸ—ï¸ <code>redis-hashtable.mmd</code> - Hashtable ç»“æ„</li>
<li>ğŸ”„ <code>redis-rehash-process.mmd</code> - Rehash æœºåˆ¶</li>
</ul>
<p><strong>å…³é”®çŸ¥è¯†ç‚¹</strong>ï¼š</p>
<ul>
<li>Dict åŒ…å« 2 ä¸ª hashtableï¼ˆ<code>ht[0]</code> å’Œ <code>ht[1]</code>ï¼‰</li>
<li>æ¸è¿›å¼ rehash é¿å…é˜»å¡</li>
<li>æ‹‰é“¾æ³•è§£å†³å“ˆå¸Œå†²çª</li>
<li>MurmurHash2 å“ˆå¸Œå‡½æ•°</li>
</ul>
<hr>
<h3 id="2-Redis-Ziplist-å‹ç¼©åˆ—è¡¨"><a href="#2-Redis-Ziplist-å‹ç¼©åˆ—è¡¨" class="headerlink" title="2. Redis Ziplist å‹ç¼©åˆ—è¡¨"></a>2. Redis Ziplist å‹ç¼©åˆ—è¡¨</h3><h4 id="ä¸‰å±‚ç»“æ„"><a href="#ä¸‰å±‚ç»“æ„" class="headerlink" title="ä¸‰å±‚ç»“æ„"></a>ä¸‰å±‚ç»“æ„</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. æ•´ä½“: zlbytes + zltail + zllen + entries + zlend</span><br><span class="line">2. èŠ‚ç‚¹: prevlen + encoding + content</span><br><span class="line">3. ç¼–ç : å­—ç¬¦ä¸²3ç§ + æ•´æ•°6ç§</span><br></pre></td></tr></table></figure>

<p><strong>æ ¸å¿ƒæ–‡ä»¶</strong>ï¼š</p>
<ul>
<li>ğŸ“ <code>redis-ziplist-detail.mmd</code> - è¯¦ç»†ç»“æ„å›¾</li>
<li>ğŸ’¾ <code>redis-ziplist-memory.mmd</code> - å†…å­˜å¸ƒå±€ç¤ºä¾‹</li>
</ul>
<p><strong>å…³é”®çŸ¥è¯†ç‚¹</strong>ï¼š</p>
<ul>
<li>è¿ç»­å†…å­˜ï¼Œæ— æŒ‡é’ˆå¼€é”€</li>
<li>å˜é•¿ç¼–ç ï¼ˆ0-12 ç›´æ¥ç¼–ç ï¼‰</li>
<li>åŒå‘éå†ï¼ˆzltail + prevlenï¼‰</li>
<li>è¿é”æ›´æ–°é—®é¢˜ï¼ˆO(nÂ²) æœ€åæƒ…å†µï¼‰</li>
</ul>
<p><strong>å†…å­˜å¯¹æ¯”</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3ä¸ªé”®å€¼å¯¹å­˜å‚¨ï¼š</span><br><span class="line">- ziplist:     32 å­—èŠ‚</span><br><span class="line">- linkedlist:  69 å­—èŠ‚ (+115%)</span><br><span class="line">- hashtable:  160 å­—èŠ‚ (+400%)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-æ•°æ®ç»“æ„é€‰å‹æŒ‡å—"><a href="#3-æ•°æ®ç»“æ„é€‰å‹æŒ‡å—" class="headerlink" title="3. æ•°æ®ç»“æ„é€‰å‹æŒ‡å—"></a>3. æ•°æ®ç»“æ„é€‰å‹æŒ‡å—</h3><h4 id="ä½¿ç”¨-ziplist-çš„åœºæ™¯-âœ…"><a href="#ä½¿ç”¨-ziplist-çš„åœºæ™¯-âœ…" class="headerlink" title="ä½¿ç”¨ ziplist çš„åœºæ™¯ âœ…"></a>ä½¿ç”¨ ziplist çš„åœºæ™¯ âœ…</h4><ul>
<li>âœ… æ•°æ®é‡å°ï¼ˆ&lt; 512 ä¸ªå…ƒç´ ï¼‰</li>
<li>âœ… å•ä¸ªæ•°æ®å°ï¼ˆ&lt; 64 å­—èŠ‚ï¼‰</li>
<li>âœ… é¡ºåºè®¿é—®ä¸ºä¸»ï¼ˆ<code>LRANGE</code>ã€<code>HGETALL</code>ï¼‰</li>
<li>âœ… å†…å­˜æ•æ„Ÿåœºæ™¯</li>
</ul>
<p><strong>å…¸å‹åº”ç”¨</strong>ï¼š</p>
<ul>
<li>Hash: Sessionã€å•†å“åŸºç¡€ä¿¡æ¯</li>
<li>List: æµè§ˆå†å²ã€æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå°ï¼‰</li>
<li>ZSet: TOP10 æ’è¡Œæ¦œ</li>
</ul>
<h4 id="ä½¿ç”¨-hashtable-çš„åœºæ™¯-âœ…"><a href="#ä½¿ç”¨-hashtable-çš„åœºæ™¯-âœ…" class="headerlink" title="ä½¿ç”¨ hashtable çš„åœºæ™¯ âœ…"></a>ä½¿ç”¨ hashtable çš„åœºæ™¯ âœ…</h4><ul>
<li>âœ… éœ€è¦å¿«é€ŸæŸ¥æ‰¾ï¼ˆ<code>HGET</code>ã€<code>HEXISTS</code>ï¼‰</li>
<li>âœ… æ•°æ®é‡å¤§ï¼ˆ&gt; 512 ä¸ªå­—æ®µï¼‰</li>
<li>âœ… éšæœºè®¿é—®ä¸ºä¸»</li>
<li>âœ… å­—æ®µç‹¬ç«‹æ›´æ–°ï¼ˆ<code>HINCRBY</code>ï¼‰</li>
</ul>
<p><strong>å…¸å‹åº”ç”¨</strong>ï¼š</p>
<ul>
<li>Hash: ç”¨æˆ·ç”»åƒã€å¤æ‚å¯¹è±¡</li>
<li>Set: å¤§é›†åˆå»é‡</li>
<li>ZSet: å…¨ç«™æ’è¡Œæ¦œ</li>
</ul>
<p><strong>è¯¦ç»†å¯¹æ¯”</strong>ï¼š</p>
<ul>
<li>ğŸ“Š <code>redis-datastructure-comparison.mmd</code></li>
</ul>
<hr>
<h2 id="ğŸ–¥ï¸-å¦‚ä½•ä½¿ç”¨"><a href="#ğŸ–¥ï¸-å¦‚ä½•ä½¿ç”¨" class="headerlink" title="ğŸ–¥ï¸ å¦‚ä½•ä½¿ç”¨"></a>ğŸ–¥ï¸ å¦‚ä½•ä½¿ç”¨</h2><h3 id="æ–¹æ³•-1-åœ¨-Cursor-ä¸­é¢„è§ˆ"><a href="#æ–¹æ³•-1-åœ¨-Cursor-ä¸­é¢„è§ˆ" class="headerlink" title="æ–¹æ³• 1: åœ¨ Cursor ä¸­é¢„è§ˆ"></a>æ–¹æ³• 1: åœ¨ Cursor ä¸­é¢„è§ˆ</h3><ol>
<li><p>æ‰“å¼€é¢„è§ˆæ–‡ä»¶ï¼š</p>
<ul>
<li><code>redis-hashtable-preview.md</code></li>
<li><code>redis-ziplist-preview.md</code></li>
</ul>
</li>
<li><p>æŒ‰å¿«æ·é”®ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">macOS: Cmd + Shift + V</span><br><span class="line">Windows/Linux: Ctrl + Shift + V</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¦‚æœå›¾è¡¨æœªæ¸²æŸ“ï¼Œå®‰è£…æ’ä»¶ï¼š</p>
<ul>
<li>æ‰“å¼€æ‰©å±•ï¼š<code>Cmd + Shift + X</code></li>
<li>æœç´¢ï¼š<code>Markdown Preview Mermaid Support</code></li>
<li>å®‰è£…å¹¶é‡å¯é¢„è§ˆ</li>
</ul>
</li>
</ol>
<h3 id="æ–¹æ³•-2-åœ¨çº¿é¢„è§ˆ"><a href="#æ–¹æ³•-2-åœ¨çº¿é¢„è§ˆ" class="headerlink" title="æ–¹æ³• 2: åœ¨çº¿é¢„è§ˆ"></a>æ–¹æ³• 2: åœ¨çº¿é¢„è§ˆ</h3><p>è®¿é—® <a href="https://mermaid.live,ç²˜è´´/">https://mermaid.liveï¼Œç²˜è´´</a> <code>.mmd</code> æ–‡ä»¶å†…å®¹æŸ¥çœ‹æ•ˆæœã€‚</p>
<h3 id="æ–¹æ³•-3-åœ¨åšå®¢ä¸­å¼•ç”¨"><a href="#æ–¹æ³•-3-åœ¨åšå®¢ä¸­å¼•ç”¨" class="headerlink" title="æ–¹æ³• 3: åœ¨åšå®¢ä¸­å¼•ç”¨"></a>æ–¹æ³• 3: åœ¨åšå®¢ä¸­å¼•ç”¨</h3><p>åœ¨ Markdown æ–‡ç« ä¸­ç›´æ¥åµŒå…¥ï¼š</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">```mermaid</span></span><br><span class="line"><span class="code">graph TB</span></span><br><span class="line"><span class="code">    A[å¼€å§‹] --&gt; B[å¤„ç†]</span></span><br><span class="line"><span class="code">    B --&gt; C[ç»“æŸ]</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure>

<p>æˆ–å¼•ç”¨æ–‡ä»¶ï¼š</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¯¦è§æ¶æ„å›¾ï¼š[<span class="string">redis-hashtable</span>](<span class="link">/diagrams/mermaid/redis-hashtable.mmd</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“š-ç›¸å…³æ–‡ç« "><a href="#ğŸ“š-ç›¸å…³æ–‡ç« " class="headerlink" title="ğŸ“š ç›¸å…³æ–‡ç« "></a>ğŸ“š ç›¸å…³æ–‡ç« </h2><ul>
<li>ğŸ“ <code>/source/_posts/system-design/8-cache-redis.md</code><ul>
<li>Hash åº•å±‚å®ç°åŸç†è¯¦è§£</li>
<li>ziplist è¯¦ç»†ç»“æ„è¯´æ˜</li>
<li>ç”µå•†åœºæ™¯æœ€ä½³å®è·µ</li>
</ul>
</li>
</ul>
<hr>
<h2 id="ğŸ”‘-æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥"><a href="#ğŸ”‘-æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥" class="headerlink" title="ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥"></a>ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥</h2><h3 id="Hashtable-å…³é”®ç‚¹"><a href="#Hashtable-å…³é”®ç‚¹" class="headerlink" title="Hashtable å…³é”®ç‚¹"></a>Hashtable å…³é”®ç‚¹</h3><ul>
<li><strong>åŒå“ˆå¸Œè¡¨</strong>ï¼šht[0] æ­£å¸¸ä½¿ç”¨ï¼Œht[1] ç”¨äº rehash</li>
<li><strong>æ¸è¿›å¼ rehash</strong>ï¼šæ¯æ¬¡æ“ä½œè¿ç§»ä¸€ä¸ªæ¡¶ï¼Œé¿å…é˜»å¡</li>
<li><strong>è´Ÿè½½å› å­</strong>ï¼šused &#x2F; sizeï¼Œè§¦å‘æ‰©å®¹&#x2F;ç¼©å®¹</li>
<li><strong>æ‹‰é“¾æ³•</strong>ï¼šè§£å†³å“ˆå¸Œå†²çª</li>
</ul>
<h3 id="Ziplist-å…³é”®ç‚¹"><a href="#Ziplist-å…³é”®ç‚¹" class="headerlink" title="Ziplist å…³é”®ç‚¹"></a>Ziplist å…³é”®ç‚¹</h3><ul>
<li><strong>prevlen</strong>ï¼š1 æˆ– 5 å­—èŠ‚ï¼Œè®°å½•å‰ä¸€èŠ‚ç‚¹é•¿åº¦</li>
<li><strong>encoding</strong>ï¼šå˜é•¿ç¼–ç ï¼Œæ ‡è¯†ç±»å‹å’Œé•¿åº¦</li>
<li><strong>è¿é”æ›´æ–°</strong>ï¼š254 å­—èŠ‚è¾¹ç•Œï¼Œæœ€å O(nÂ²)</li>
<li><strong>é˜ˆå€¼</strong>ï¼š512 entriesï¼ˆHash&#x2F;Listï¼‰ï¼Œ128 entriesï¼ˆZSetï¼‰</li>
</ul>
<h3 id="æ€§èƒ½å¯¹æ¯”"><a href="#æ€§èƒ½å¯¹æ¯”" class="headerlink" title="æ€§èƒ½å¯¹æ¯”"></a>æ€§èƒ½å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>ziplist</th>
<th>hashtable</th>
</tr>
</thead>
<tbody><tr>
<td>æŸ¥æ‰¾</td>
<td>O(n)</td>
<td>O(1)</td>
</tr>
<tr>
<td>æ’å…¥</td>
<td>O(n)</td>
<td>O(1) å¹³å‡</td>
</tr>
<tr>
<td>åˆ é™¤</td>
<td>O(n)</td>
<td>O(1) å¹³å‡</td>
</tr>
<tr>
<td>å†…å­˜</td>
<td>æä½</td>
<td>é«˜ï¼ˆæŒ‡é’ˆå¼€é”€ï¼‰</td>
</tr>
</tbody></table>
<hr>
<h2 id="ğŸ› ï¸-é…ç½®å‚æ•°å‚è€ƒ"><a href="#ğŸ› ï¸-é…ç½®å‚æ•°å‚è€ƒ" class="headerlink" title="ğŸ› ï¸ é…ç½®å‚æ•°å‚è€ƒ"></a>ğŸ› ï¸ é…ç½®å‚æ•°å‚è€ƒ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Redis é…ç½®æ–‡ä»¶ redis.conf</span><br><span class="line"></span><br><span class="line"># Hash ç¼–ç é˜ˆå€¼</span><br><span class="line">hash-max-ziplist-entries 512</span><br><span class="line">hash-max-ziplist-value 64</span><br><span class="line"></span><br><span class="line"># List ç¼–ç é˜ˆå€¼</span><br><span class="line">list-max-ziplist-entries 512</span><br><span class="line">list-max-ziplist-value 64</span><br><span class="line"></span><br><span class="line"># ZSet ç¼–ç é˜ˆå€¼</span><br><span class="line">zset-max-ziplist-entries 128</span><br><span class="line">zset-max-ziplist-value 64</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“–-æ¨èé˜…è¯»é¡ºåº"><a href="#ğŸ“–-æ¨èé˜…è¯»é¡ºåº" class="headerlink" title="ğŸ“– æ¨èé˜…è¯»é¡ºåº"></a>ğŸ“– æ¨èé˜…è¯»é¡ºåº</h2><h3 id="åˆå­¦è€…è·¯å¾„-ğŸŒŸ"><a href="#åˆå­¦è€…è·¯å¾„-ğŸŒŸ" class="headerlink" title="åˆå­¦è€…è·¯å¾„ ğŸŒŸ"></a>åˆå­¦è€…è·¯å¾„ ğŸŒŸ</h3><ol>
<li><code>redis-datastructure-comparison.mmd</code> - æ•´ä½“å¯¹æ¯”</li>
<li><code>redis-hash-encoding.mmd</code> - ç¼–ç é€‰æ‹©</li>
<li><code>redis-ziplist-detail.mmd</code> - Ziplist åŸºç¡€</li>
<li><code>redis-hashtable.mmd</code> - Hashtable åŸºç¡€</li>
</ol>
<h3 id="è¿›é˜¶è·¯å¾„-ğŸš€"><a href="#è¿›é˜¶è·¯å¾„-ğŸš€" class="headerlink" title="è¿›é˜¶è·¯å¾„ ğŸš€"></a>è¿›é˜¶è·¯å¾„ ğŸš€</h3><ol>
<li><code>redis-ziplist-memory.mmd</code> - å†…å­˜å¸ƒå±€ç»†èŠ‚</li>
<li><code>redis-rehash-process.mmd</code> - Rehash æµç¨‹</li>
<li>é˜…è¯»åšå®¢æ–‡ç« çš„è¯¦ç»†è¯´æ˜</li>
<li>å®è·µï¼šæŸ¥çœ‹çº¿ä¸Š Redis çš„ç¼–ç ç±»å‹</li>
</ol>
<hr>
<h2 id="ğŸ”-ç›‘æ§å‘½ä»¤"><a href="#ğŸ”-ç›‘æ§å‘½ä»¤" class="headerlink" title="ğŸ” ç›‘æ§å‘½ä»¤"></a>ğŸ” ç›‘æ§å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æ•°æ®ç±»å‹</span></span><br><span class="line">redis&gt; TYPE mykey</span><br><span class="line"><span class="string">&quot;hash&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç¼–ç æ–¹å¼</span></span><br><span class="line">redis&gt; OBJECT ENCODING mykey</span><br><span class="line"><span class="string">&quot;ziplist&quot;</span>  <span class="comment"># æˆ– &quot;hashtable&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å†…å­˜å ç”¨</span></span><br><span class="line">redis&gt; MEMORY USAGE mykey</span><br><span class="line">(<span class="built_in">integer</span>) 184</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾å¤§ key</span></span><br><span class="line">redis-cli --bigkeys</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼ˆè°ƒè¯•ç”¨ï¼‰</span></span><br><span class="line">redis&gt; DEBUG OBJECT mykey</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“-æ›´æ–°æ—¥å¿—"><a href="#ğŸ“-æ›´æ–°æ—¥å¿—" class="headerlink" title="ğŸ“ æ›´æ–°æ—¥å¿—"></a>ğŸ“ æ›´æ–°æ—¥å¿—</h2><ul>
<li>2026-01-08: åˆ›å»ºå®Œæ•´çš„ Redis æ•°æ®ç»“æ„å¯è§†åŒ–æ–‡æ¡£<ul>
<li>æ–°å¢ Hash åº•å±‚å®ç°ï¼ˆhashtable + ziplistï¼‰</li>
<li>æ–°å¢ ziplist è¯¦ç»†ç»“æ„è¯´æ˜</li>
<li>æ–°å¢æ•°æ®ç»“æ„å¯¹æ¯”åˆ†æ</li>
<li>æ–°å¢å†…å­˜å¸ƒå±€å®ä¾‹</li>
</ul>
</li>
</ul>
