---
title: mysql 基础知识
categories:
- other
---

https://thinkwon.blog.csdn.net/article/details/104778621

## 数据库三大范式是什么
- 第一范式：每个列都不可以再拆分。
- 第二范式：在第一范式的基础上，非主键列完全依赖于主键，而不能是依赖于主键的一部分。
- 第三范式：在第二范式的基础上，非主键列只依赖于主键，不依赖于其他非主键。
在设计数据库结构的时候，要尽量遵守三范式，如果不遵守，必须有足够的理由。比如性能。事实上我们经常会为了性能而妥协数据库的设计。

## mysql有哪些数据类型
- int,tinyint,int(10)什么意思
- float，double
- varchar，char（定长，根据需要使用空格填充）
- datetime，timestamp

## 存储引擎
- MySQL存储引擎MyISAM与InnoDB区别，比较通过的innodb，支持事务
- InnoDB引擎的4大特性

## 索引index
- 什么是索引，对索引的理解，索引有哪些优缺点，索引一定可以提高查询性能吗？
- 在什么场景下用索引，where，order by,join on
- 索引的类型，主键索引、唯一索引和普通索引
- 怎么创建和删除索引
- 索引的数据结果和算法，B+树、B树、hash索引，各自的优缺点及用途

## 事务Transaction
- 什么是数据库事务？事务是一个不可分割的数据库操作序列，也是数据库并发控制的基本单位，其执行的结果必须使数据库从一种一致性状态变到另一种一致性状态。事务是逻辑上的一组操作，要么都执行，要么都不执行
- 什么是ACID
- 什么是脏读、不可重复读和幻读？
- sql四个隔离级别，READ-UNCOMMITTED，READ-COMMITTED，READ-COMMITTED，SERIALIZABLE(可串行化)
- 锁，在Read Uncommitted级别下，读取数据不需要加共享锁，这样就不会跟被修改的数据上的排他锁冲突；在Read Committed级别下，读操作需要加共享锁，但是在语句执行完以后释放共享锁；在Repeatable Read级别下，读操作需要加共享锁，但是在事务提交之前并不释放共享锁，也就是必须等待事务执行完毕以后才释放共享锁。SERIALIZABLE 是限制性最强的隔离级别，因为该级别锁定整个范围的键，并一直持有锁，直到事务完成
- 死锁。死锁是指两个或多个事务在同一资源上相互占用，并请求锁定对方的资源，从而导致恶性循环的现象
- 悲观锁和乐观锁。悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。在查询完数据的时候就把事务锁起来，直到提交事务。实现方式：使用数据库中的锁机制。：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。在修改数据的时候把事务锁起来，通过version的方式来进行锁定。实现方式：乐一般会使用版本号机制或CAS算法实现。乐观锁适合多读的场景，悲观锁适合多写的场景

## 视图view
- 什么是视图，什么场景下使用，为什么使用？有什么优缺点
- 数据安全性，简化sql查询；
- 视图是由基本表(实表)产生的表(虚表)，视图的列可以来自不同的表，是表的抽象和在逻辑意义上建立的新关系，视图的建立和删除不影响基本表
- 数据库必须把视图的查询转化成对基本表的查询，如果这个视图是由一个复杂的多表查询所定义，那么，即使是视图的一个简单查询，数据库也把它变成一个复杂的结合体，需要花费一定的时间

## 优化
- 如何定位及优化SQL语句的性能问题？创建的索引有没有被使用到?或者说怎么才可以知道这条语句运行很慢的原因？explain
- 大表数据查询，怎么优化？a. 优化shema、sql语句+索引；b.第二加缓存，memcached, redis；
主从复制，读写分离；垂直拆分，根据你模块的耦合度，将一个大的系统分为多个小的系统，也就是分布式系统；水平切分，针对数据量大的表，这一步最麻烦，最能考验技术水平，要选择一个合理的sharding key, 为了有好的查询效率，表结构也要改动，做一定的冗余，应用也要改，sql中尽量带sharding key，将数据定位到限定的表上去查，而不是扫描全部的表
- 慢查询日志,用于记录执行时间超过某个临界值的SQL日志，用于快速定位慢查询，为我们的优化做参考
- 关心过业务系统里面的sql耗时吗？统计过慢查询吗？对慢查询都怎么优化过？分析sql语句，分析执行计划。慢查询的优化首先要搞明白慢的原因是什么？ 是查询条件没有命中索引？是load了不需要的数据列？还是数据量太大？

## 其它
- 主键和外键。数据库表中对储存数据对象予以唯一和完整标识的数据列或属性的组合。一个数据列只能有一个主键，且主键的取值不能缺失，即不能为空值（Null）。外键：在一个表中存在的另一个表的主键称此表的外键。
- 主键是数据库确保数据行在整张表唯一性的保障，即使业务上本张表没有主键，也建议添加一个自增长的ID列作为主键。设定了主键之后，在后续的删改查的时候可能更加快速以及确保操作数据范围安全。
- 关联查询、联合查询、子查询（嵌套查询）